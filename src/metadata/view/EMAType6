{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "cls": [
            "EMAType"
        ],
        "designer|userClassName": "EMAType6",
        "scrollable": "vertical"
    },
    "designerId": "d3bbe1ab-633c-4374-99df-15ed7e7b7748",
    "cn": [
        {
            "type": "Ext.Label",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "html": "What is happening right now?",
                "itemId": "question",
                "margin": "8px"
            },
            "designerId": "4d3cdf78-8207-46f8-9b76-33b5bb9f5704"
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "goola": "ema",
                "docked": null,
                "itemId": "fset",
                "hideOnMaskTap": false,
                "modal": false,
                "instructions": null,
                "title": null
            },
            "designerId": "64b50e94-8b84-435e-acb3-8fce1015be4c",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "goola",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "Ext.field.Slider",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "stress",
                        "label": "How much stress are you experiencing in this moment? <div><span style=\"float:right\">a lot</span><span>none</span></span>",
                        "labelAlign": "top",
                        "labelWrap": true,
                        "name": "stress",
                        "value": [
                            50
                        ]
                    },
                    "designerId": "84b4bc88-227a-461f-852b-c1c0cc9d31c9"
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "action": "exercise",
                        "disabled": null,
                        "itemId": "done",
                        "autoEvent": null,
                        "text": "Done"
                    },
                    "designerId": "3fd4f5aa-b48b-4e84-80f8-691d32f287a4",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "action",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onDoneRelease",
                                "implHandler": [
                                    "stress=button.parent.child('#stress').getValue();",
                                    "",
                                    "user = HEART.getItem('local', 'user');",
                                    "user = JSON.parse(user);",
                                    "",
                                    "user.stress=stress;",
                                    "",
                                    "user = JSON.stringify(user);",
                                    "HEART.setItem('local', 'user', user);",
                                    "",
                                    "mylog = JSON.parse(HEART.getItem('local', 'mylog'))||{};",
                                    "",
                                    "dead = new Date(Date.now()-Date.now()%(1000*60*60*24*7)+(1000*60*60*24*10));",
                                    "",
                                    "if(mylog.expire){",
                                    "\tif(Date.now()>mylog.expire){",
                                    "\t\tmylog = {};",
                                    "\t\tmylog.expire = dead;",
                                    "\t}",
                                    "",
                                    "}else{",
                                    "\tmylog.expire = dead",
                                    "}",
                                    "",
                                    "stressed = mylog.stressed||{high: stress, low: stress, average: stress, count: 0};",
                                    "",
                                    "if(stress>stressed.high){",
                                    "\tstressed.high=stress;",
                                    "}else if(stress<stressed.low){",
                                    "\tstressed.low=stressed",
                                    "}",
                                    "",
                                    "stressed.average=(stressed.average*stressed.count+stress)/(stressed.count+1);",
                                    "",
                                    "stressed.count+=1;",
                                    "",
                                    "mylog.stressed=stressed;",
                                    "",
                                    "mylog = JSON.stringify(mylog);",
                                    "HEART.setItem('local', 'mylog', mylog);",
                                    "",
                                    "",
                                    "button.fireEvent('tap');"
                                ],
                                "delay": null,
                                "single": null,
                                "name": "release",
                                "order": "before"
                            },
                            "designerId": "138ade4d-6924-453c-976d-00ffe68b5632"
                        }
                    ]
                }
            ]
        }
    ]
}