{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "EMXsController"
    },
    "designerId": "e3282f86-3944-46c9-a9f6-339833db34db",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onListSelect",
                "fn": "onListSelect",
                "implHandler": [
                    "var exercise = Ext.create('HEART.view.' + record.get(\"type\"));",
                    "exercise.record_data = record;",
                    "",
                    "if(record.get(\"type\").indexOf('emi')>=0&&Math.random()<AJAX.probability){",
                    "\tvar field = exercise.child('fieldset');",
                    "\tfield.child('#pre-slider').hide();",
                    "\tfield.child('#post-slider').hide();",
                    "}",
                    "",
                    "this.getExercises().push(exercise);"
                ],
                "name": "select",
                "designer|targetType": "Ext.dataview.List",
                "designer|controlQuery": "#exerciseList"
            },
            "designerId": "e6598e40-fef6-4bbf-b6fb-acad809e58de"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "launch",
                "fn": "launch",
                "implHandler": [
                    "this.getExercises().getNavigationBar().hide();",
                    "this.getStressed().getNavigationBar().hide();"
                ]
            },
            "designerId": "dd4da508-1f77-48bf-bffe-c6833c62e462"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "exercises",
                "ref": "exercises",
                "selector": "#exercises"
            },
            "designerId": "bc7a5445-3930-4933-8929-f59f46701fd5"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onExercisesHide",
                "fn": "onExercisesHide",
                "implHandler": [
                    "this.getExercises().pop();"
                ],
                "name": "hide",
                "designer|targetType": "Ext.navigation.View",
                "designer|controlQuery": "#exercises"
            },
            "designerId": "9910458a-ad91-49e4-a7f7-03e4f9c9ff91"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "stressed",
                "ref": "stressed",
                "selector": "#stressed"
            },
            "designerId": "380bf61c-189c-459b-9819-b72f47a31cf9"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onStressedShow",
                "fn": "onStressedShow",
                "implHandler": [
                    "var EMXs = Ext.getStore('EMXs');",
                    "var count = EMXs.getAllCount();",
                    "",
                    "var index = Math.floor(count*Math.random());",
                    "var emx = EMXs.getAt(index);",
                    "",
                    "var exercise = Ext.create('HEART.view.' + emx.get(\"type\"));",
                    "",
                    "exercise.record_data = emx;",
                    "this.getStressed().push(exercise);"
                ],
                "name": "show",
                "designer|targetType": "Ext.navigation.View",
                "designer|controlQuery": "#stressed"
            },
            "designerId": "ab72d431-16a4-43ab-88f3-0cfb5483fa3d"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onStressedHide",
                "fn": "onStressedHide",
                "implHandler": [
                    "this.getStressed().pop();"
                ],
                "name": "hide",
                "designer|targetType": "Ext.navigation.View",
                "designer|controlQuery": "#stressed"
            },
            "designerId": "1fa47330-c437-4bfd-93a2-9c8d15ff4fdf"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onExerciseDone",
                "fn": "onExerciseDone",
                "implHandler": [
                    "var form = button.parent.parent;",
                    "var values = form.getValues();",
                    "var content = values;",
                    "",
                    "var type = form.record_data.get('type');",
                    "",
                    "content.type = type;",
                    "content.user = 'kyle';",
                    "",
                    "var succ = function(response) {",
                    "\tconsole.log(response);",
                    "};",
                    "",
                    "var fail = function(response) {",
                    "\tvar feeds = Ext.getStore(\"Feeds\");",
                    "\tfeeds.add({timestamp: Date.now(), type: type, data: values, mark: false});",
                    "\tfeeds.sort(\"timestamp\", 'DESC');\t\t",
                    "\tfeeds.sync();",
                    "};",
                    "",
                    "AJAX.toSensor(content, succ, fail);",
                    "",
                    "form.destroy();",
                    "",
                    "this.getExercises().pop();"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[action=exercise]"
            },
            "designerId": "4e47477b-a5ac-44a6-9e25-8784b2d2a942"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onPreSliderChange",
                "fn": "onPreSliderChange",
                "implHandler": [
                    "Slider.hide();"
                ],
                "name": "change",
                "designer|targetType": "Ext.field.Slider",
                "designer|controlQuery": "sliderfield[name=pre-slider]"
            },
            "designerId": "d45f4be5-1b58-4b82-b794-d4a3c894ea79"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onPostSliderChange",
                "fn": "onPostSliderChange",
                "implHandler": [
                    "Slider.hide();"
                ],
                "name": "change",
                "designer|targetType": "Ext.field.Slider",
                "designer|controlQuery": "sliderfield[name=post-slider]"
            },
            "designerId": "b52bf379-6cfa-4c81-8bce-17719749c456"
        }
    ]
}